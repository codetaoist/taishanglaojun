# 太上老君监控系统环境变量配置示例
# 复制此文件为 .env 并根据实际环境修改配置

# ==================== 基础配置 ====================
# 应用版本
VERSION=latest

# 镜像仓库
REGISTRY=ghcr.io

# 环境类型 (development, staging, production)
ENVIRONMENT=development

# ==================== 域名配置 ====================
# 主域名
DOMAIN=taishanglaojun.com

# 各服务子域名
MONITORING_DOMAIN=monitoring.taishanglaojun.com
PROMETHEUS_DOMAIN=prometheus.taishanglaojun.com
GRAFANA_DOMAIN=grafana.taishanglaojun.com
JAEGER_DOMAIN=jaeger.taishanglaojun.com
KIBANA_DOMAIN=kibana.taishanglaojun.com
ALERTMANAGER_DOMAIN=alertmanager.taishanglaojun.com

# ==================== 数据库配置 ====================
# PostgreSQL 配置
DB_HOST=postgres
DB_PORT=5432
DB_NAME=taishanglaojun_monitoring
DB_USER=monitoring_user
DB_PASSWORD=your_secure_db_password_here

# ==================== 缓存配置 ====================
# Redis 配置
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your_secure_redis_password_here

# ==================== 监控配置 ====================
# Prometheus 配置
PROMETHEUS_URL=http://prometheus:9090

# Grafana 配置
GRAFANA_URL=http://grafana:3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_secure_grafana_password_here

# InfluxDB 配置
INFLUXDB_URL=http://influxdb:8086
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=your_secure_influxdb_password_here
INFLUXDB_ORG=taishanglaojun
INFLUXDB_BUCKET=monitoring
INFLUXDB_TOKEN=your_secure_influxdb_token_here

# Jaeger 配置
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# Elasticsearch 配置
ELASTICSEARCH_URL=http://elasticsearch:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=your_secure_elasticsearch_password_here

# ==================== 安全配置 ====================
# JWT 配置
JWT_SECRET=your_very_secure_jwt_secret_key_here_at_least_32_characters

# 加密密钥
ENCRYPTION_KEY=your_very_secure_encryption_key_here_at_least_32_characters

# 基础认证用户 (格式: user:password_hash)
BASIC_AUTH_USERS=admin:$$2y$$10$$your_bcrypt_hash_here

# ==================== 告警配置 ====================
# AlertManager 配置
ALERTMANAGER_URL=http://alertmanager:9093

# Webhook 配置
WEBHOOK_URL=https://your-webhook-endpoint.com/alerts

# Slack 配置
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# ==================== 邮件配置 ====================
# SMTP 配置
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=your-email@gmail.com
EMAIL_SMTP_PASSWORD=your_app_password_here

# ==================== 开发环境配置 ====================
# 开发工具端口映射
ADMINER_PORT=8080
REDIS_COMMANDER_PORT=8081
DOCS_PORT=8082
PORTAINER_PORT=9000

# 开发环境数据库端口
DEV_DB_PORT=5433
DEV_REDIS_PORT=6380
DEV_PROMETHEUS_PORT=9091
DEV_GRAFANA_PORT=3001
DEV_INFLUXDB_PORT=8087
DEV_JAEGER_PORT=16687
DEV_JAEGER_ADMIN_PORT=14269
DEV_ELASTICSEARCH_PORT=9201
DEV_ELASTICSEARCH_TRANSPORT_PORT=9301
DEV_KIBANA_PORT=5602
DEV_ALERTMANAGER_PORT=9094
DEV_NODE_EXPORTER_PORT=9101
DEV_NGINX_HTTP_PORT=8080
DEV_NGINX_HTTPS_PORT=8443

# ==================== 生产环境配置 ====================
# 生产环境资源限制
PROD_MONITORING_CPU_LIMIT=2.0
PROD_MONITORING_MEMORY_LIMIT=2G
PROD_DB_CPU_LIMIT=1.0
PROD_DB_MEMORY_LIMIT=1G
PROD_REDIS_CPU_LIMIT=0.5
PROD_REDIS_MEMORY_LIMIT=512M

# 生产环境副本数
PROD_MONITORING_REPLICAS=3
PROD_DB_REPLICAS=1
PROD_REDIS_REPLICAS=1

# ==================== 备份配置 ====================
# 数据备份配置
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=taishanglaojun-monitoring-backups
BACKUP_S3_REGION=us-west-2
BACKUP_S3_ACCESS_KEY=your_s3_access_key_here
BACKUP_S3_SECRET_KEY=your_s3_secret_key_here

# ==================== 日志配置 ====================
# 日志级别
LOG_LEVEL=info

# 日志格式 (json, text)
LOG_FORMAT=json

# 日志输出 (stdout, file, both)
LOG_OUTPUT=stdout

# ==================== 性能配置 ====================
# 数据库连接池
DB_MAX_CONNECTIONS=100
DB_MAX_IDLE_CONNECTIONS=10
DB_CONNECTION_MAX_LIFETIME=1h

# Redis 连接池
REDIS_MAX_CONNECTIONS=100
REDIS_MAX_IDLE_CONNECTIONS=10

# HTTP 服务器配置
HTTP_READ_TIMEOUT=30s
HTTP_WRITE_TIMEOUT=30s
HTTP_IDLE_TIMEOUT=120s

# ==================== 功能开关 ====================
# 启用功能
ENABLE_METRICS=true
ENABLE_TRACING=true
ENABLE_LOGGING=true
ENABLE_ALERTING=true
ENABLE_BACKUP=true

# 调试功能 (仅开发环境)
ENABLE_PPROF=false
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_HOT_RELOAD=false

# ==================== 第三方集成 ====================
# GitHub 集成
GITHUB_TOKEN=your_github_token_here
GITHUB_WEBHOOK_SECRET=your_github_webhook_secret_here

# GitLab 集成
GITLAB_TOKEN=your_gitlab_token_here
GITLAB_WEBHOOK_SECRET=your_gitlab_webhook_secret_here

# Jenkins 集成
JENKINS_URL=https://jenkins.taishanglaojun.com
JENKINS_USER=jenkins_user
JENKINS_TOKEN=your_jenkins_token_here

# ==================== 监控阈值配置 ====================
# CPU 使用率阈值
CPU_WARNING_THRESHOLD=70
CPU_CRITICAL_THRESHOLD=90

# 内存使用率阈值
MEMORY_WARNING_THRESHOLD=80
MEMORY_CRITICAL_THRESHOLD=95

# 磁盘使用率阈值
DISK_WARNING_THRESHOLD=80
DISK_CRITICAL_THRESHOLD=90

# 网络延迟阈值 (毫秒)
NETWORK_LATENCY_WARNING=100
NETWORK_LATENCY_CRITICAL=500

# 错误率阈值 (百分比)
ERROR_RATE_WARNING=5
ERROR_RATE_CRITICAL=10

# ==================== 数据保留策略 ====================
# Prometheus 数据保留
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_RETENTION_SIZE=50GB

# InfluxDB 数据保留
INFLUXDB_RETENTION_PERIOD=90d

# Elasticsearch 数据保留
ELASTICSEARCH_RETENTION_DAYS=30

# 日志保留天数
LOG_RETENTION_DAYS=7

# ==================== 安全扫描配置 ====================
# 漏洞扫描
ENABLE_VULNERABILITY_SCAN=true
VULNERABILITY_SCAN_SCHEDULE=0 3 * * 0

# 依赖检查
ENABLE_DEPENDENCY_CHECK=true
DEPENDENCY_CHECK_SCHEDULE=0 4 * * 1

# 密钥扫描
ENABLE_SECRET_SCAN=true

# ==================== 通知配置 ====================
# 通知渠道
NOTIFICATION_CHANNELS=slack,email

# 通知级别
NOTIFICATION_LEVEL=warning

# 静默时间 (小时)
NOTIFICATION_SILENCE_HOURS=1

# ==================== 集群配置 ====================
# Docker Swarm 配置
SWARM_MANAGER_IP=192.168.1.100
SWARM_WORKER_IPS=192.168.1.101,192.168.1.102,192.168.1.103

# Kubernetes 配置
K8S_NAMESPACE=monitoring
K8S_CLUSTER_NAME=taishanglaojun-cluster
K8S_CONTEXT=taishanglaojun-context